package com.hexploits.kc.dto.request;

import com.hexploits.kc.dto.internal.EventType;
import io.micronaut.core.annotation.Introspected;
import java.util.List;

@Introspected
public class CreateWebhookRequest {

  private final String webhookUrl;

  private final List<EventType> registeredEvents;

  public CreateWebhookRequest(String webhookUrl, List<EventType> events) {
    this.webhookUrl = webhookUrl;
    this.registeredEvents = events;
  }

  public String getWebhookUrl() {
    return (webhookUrl != null &&
      !webhookUrl.startsWith("http://") &&
      !webhookUrl.startsWith("https://")) ?
      "http://" + webhookUrl :
      webhookUrl;
  }

  public List<EventType> getRegisteredEvents() {
    return registeredEvents;
  }
}
